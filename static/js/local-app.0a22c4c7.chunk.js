(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1131:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(20),o=r.n(n)()("os"),i=function(){try{return o.userInfo().uid}catch(e){return""}}},1136:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return l}));var n=r(2),o=r(486),i=r(704),a=r.n(i),c=function(e,t){var r=t.pathSeparator,o=t.getArrayItemReferenceName,i=t.shouldSplit,a=t.isReferenceMagicPropertyName,c=[],u=function(e,t){var r;return c.push({reference:e,object:t}),r={},Object(n.a)(r,a,!0),Object(n.a)(r,"referenceTo",e),r};return function e(t,n,a){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var c in t){var s=n+r+"*";if(i(s)){var l=t[c],p=o(l,a),d=a+r+p;t[c]=u(d,l),e(l,s,d)}else{var f=a+r+c;e(t[c],s,f)}}else for(var h in t){var m=n+r+h,v=a+r+h;if(i(m)){var b=t[h];t[h]=u(v,b),e(b,m,v)}else e(t[h],m,v)}}(e,"",""),c},u=function(e,t){var r=t.isReferenceMagicPropertyName,n=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,i){if(void 0!==o&&i>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var a=Object.keys(t);if(a)return Promise.all(a.map((function(o){var a=function(e){return!0===e[r]?e:null}(t[o]);return a?n(a.referenceTo).then((function(r){return t[o]=r,e(t[o],i+1)})):e(t[o],i+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},s=function(e){return function(t){return e.has(t)}},l=function(e){var t={};return function(r,n){var i=r[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[n]=t[n]||{};var c=Object(o.a)(a()(i),(function(e){return!!t[n][e]}));return t[n][c]=!0,c}}},1137:function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return x})),r.d(t,"b",(function(){return P})),r.d(t,"c",(function(){return S})),r.d(t,"a",(function(){return y}));var n=r(4),o=r(3),i=r(0),a=r.n(i),c=r(492),u=r(20),s=r.n(u),l=r(1136),p=r(548),d=r(498),f=r.n(d),h=e.gd,m=s()("fs-extra"),v=s()("path"),b=s()("@electron/remote"),g=b?b.dialog:null,j=function(e,t){var r=performance.now();return new Promise((function(n,o){m.readFile(e,{encoding:"utf8"},(function(i,a){if(i)return o(i);""===a&&o(new Error("Written file is empty, did the write fail?")),a!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-r;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),n()}))}))},x=function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,m.ensureDir(v.dirname(r));case 6:return e.next=8,m.writeFile(r,t);case 8:return e.next=10,j(r,t);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t,null,2),e.next=3,x(n,r);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),w=function(e,t,r){var n=Object(c.b)(e);if(e.isFolderProject()){var o=Object(l.b)(n,{pathSeparator:"/",getArrayItemReferenceName:Object(l.a)("name"),shouldSplit:Object(l.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return O(e.object,v.join(r,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return O(n,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return O(n,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},P=function(e,t){var r=t.fileIdentifier;if(!r)return Promise.reject('Project file is empty, "Save as" should have been called?');var n=v.dirname(r);return w(e,r,n).then((function(){return{wasSaved:!0,fileMetadata:t}}))},S=function(e,t){var r=t?t.fileIdentifier:"",o=f()(new h.AbstractFileSystemJS,p.a),i=b.getCurrentWindow(),a={defaultPath:r,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!g)return Promise.reject("Unsupported");var c=g.showSaveDialogSync(i,a);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=v.dirname(c);return h.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),w(e,c,u).then((function(){return{wasSaved:!0,fileMetadata:Object(n.a)(Object(n.a)({},t),{},{fileIdentifier:c})}}))},y=function(e,t){var r=t.fileIdentifier+".autosave";return x(Object(c.a)(e),r).catch((function(e){throw console.error("Unable to write ".concat(r,":"),e),e}))}}).call(this,r(28))},1158:function(e,t,r){"use strict";var n=r(4),o=r(20),i=r.n(o),a=r(1136),c=i()("fs"),u=i()("path"),s=i()("@electron/remote"),l=s?s.dialog:null,p=function(e){return c?new Promise((function(t,r){c.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return r(n);try{var i=JSON.parse(o);return t(i)}catch(a){return r(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},d=function(){if(!l)return Promise.reject("Not supported");var e=s.getCurrentWindow();return l.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},f=function(e){var t=e.fileIdentifier,r=u.dirname(t);return p(t).then((function(e){return Object(a.d)(e,{getReferencePartialObject:function(e){return p(u.join(r,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},h=function(e,t){var r=e.fileIdentifier,n=r+".autosave";if(c.existsSync(n)){if(!t)return Promise.resolve(!0);try{if(c.statSync(n).mtime.getTime()>c.statSync(r).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},m=function(e){return Promise.resolve(Object(n.a)(Object(n.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},v=r(1137),b=r(35);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[b.a]&&e[b.a].length?{fileIdentifier:e[b.a][0]}:null},createOperations:function(){return{onOpenWithPicker:d,onOpen:f,hasAutoSave:h,onSaveProject:v.b,onSaveProjectAs:v.c,onAutoSaveProject:v.a,onGetAutoSave:m,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},1860:function(e,t,r){"use strict";var n=r(3),o=r(18),i=r(0),a=r.n(i),c=r(864),u=r(536),s=r(20),l=r.n(s),p=r(35),d=l()("@electron/remote"),f=d?d.dialog:null,h=l()("path"),m=Object(o.a)(c.a.map((function(e){var t=e.kind,r=(e.displayName,e.fileExtensions),o=e.createNewResource;return{name:"local-file-opener-"+t,displayName:{id:"Choose a file"},displayTab:"import",kind:t,selectResourcesHeadless:function(){var e=Object(n.a)(a.a.mark((function e(n){var i,c,s,l,m,v,b,g,j,x,O,w,P;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.i18n,c=n.getLastUsedPath,s=n.setLastUsedPath,l=n.project,m=n.options,f){e.next=3;break}throw new Error("Electron dialog not supported in this environment.");case 3:return v=["openFile"],m.multiSelection&&v.push("multiSelections"),b=h.dirname(l.getProjectFile()),g=c(l,t)||b,j=d.getCurrentWindow(),e.next=10,f.showOpenDialog(j,{title:i._({id:"Choose a file"}),properties:v,filters:[{name:i._({id:"Supported files"}),extensions:r}],defaultPath:g});case 10:if(x=e.sent,(O=x.filePaths)&&O.length){e.next=14;break}return e.abrupt("return",[]);case 14:if(w=h.parse(O[0]).dir,s(l,t,w),P=O.filter((function(e){return!Object(u.f)(l,e)})),!P.length){e.next=23;break}if(!p.b.showConfirmDialog(i._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"}))){e.next=23;break}return e.next=22,Object(u.b)(l,O);case 22:O=e.sent;case 23:return e.abrupt("return",O.map((function(e){var t=o(),r=h.dirname(l.getProjectFile());return t.setFile(h.relative(r,e)),t.setName(h.relative(r,e)),t})));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renderComponent:function(){return null}}})));t.a=m},1861:function(e,t,r){"use strict";var n=r(1862),o=r(1863),i=r(1864),a=r(81),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(a.n)("piskel"),Object(n.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(a.n)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(a.n)("yarn"),Object(i.a)(e)}}];t.a=c},1862:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p}));var n=r(4),o=r(20),i=r.n(o),a=r(536),c=i()("electron"),u=i()("path"),s=c?c.ipcRenderer:null,l=e.gd,p=function(e){var t=e.project,r=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,i=e.onChangesSaved,p=e.extraOptions;if(c&&s){var d=r.map((function(e,r){return{resourcePath:Object(a.d)(t,e),resourceName:e,originalIndex:r}})),f=u.dirname(t.getProjectFile()),h=Object(n.a)(Object(n.a)({},p),{},{resources:d,singleFrame:o,projectPath:f});s.removeAllListeners("piskel-changes-saved"),s.on("piskel-changes-saved",(function(e,r,n,o){var c=o.data?{pskl:o}:null,s=t.getResourcesManager();r.forEach((function(e){e.name=u.relative(f,e.path),Object(a.c)(t,new l.ImageResource,e.name)})),r[0].metadata=c,r[0].newAnimationName=n,o.singleFrame?(c&&s.getResource(u.relative(f,r[0].path)).setMetadata(JSON.stringify(c)),i(r)):i(r)})),s.send("piskel-open-then-load-animation",h)}}}).call(this,r(28))},1863:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return l}));var n=r(20),o=r.n(n),i=r(536),a=o()("electron"),c=o()("path"),u=a?a.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,r=(e.resourcesLoader,e.resourceNames),n=e.onChangesSaved,o=e.extraOptions;if(a&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(i.d)(t,r[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("jfxr-changes-saved"),u.on("jfxr-changes-saved",(function(e,r,o){var a=c.relative(l,r);Object(i.c)(t,new s.AudioResource,a);var u={jfxr:o};t.getResourcesManager().getResource(a).setMetadata(JSON.stringify(u)),n([{metadata:u,name:a}])})),u.send("jfxr-create-wav",p)}}}).call(this,r(28))},1864:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return l}));var n=r(20),o=r.n(n),i=r(536),a=o()("electron"),c=o()("path"),u=a?a.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,r=(e.resourcesLoader,e.resourceNames),n=e.onChangesSaved,o=e.extraOptions;if(a&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(i.d)(t,r[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("yarn-changes-saved"),u.on("yarn-changes-saved",(function(e,r){var o=c.relative(l,r);Object(i.c)(t,new s.JsonResource,o),n([{name:o}])})),u.send("yarn-create-json",p)}}}).call(this,r(28))},1865:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return S}));var n=r(9),o=r(8),i=r(13),a=r(14),c=r(12),u=r(1),s=r(548),l=r(20),p=r.n(l),d=r(1120),f=r(531),h=r(1866),m=r(498),v=r.n(m),b=r(800),g=r(1875),j=r(7),x=p()("electron"),O=p()("path"),w=x?x.ipcRenderer:null,P=e.gd,S=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){var e;Object(n.a)(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowOptions:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){var t=e.state,r=t.previewGamePath,n=t.previewBrowserWindowOptions;n&&r&&w&&w.invoke("preview-open",{previewBrowserWindowOptions:n,previewGameIndexHtmlPath:"file://".concat(r,"/index.html"),alwaysOnTop:e.state.alwaysOnTop,hideMenuBar:e.state.hideMenuBar})},e._openPreviewWindow=function(t,r,n){e.setState({previewBrowserWindowOptions:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1}},previewGamePath:r,hideMenuBar:!n.getIsMenuBarHiddenInPreview(),alwaysOnTop:n.getIsAlwaysOnTopInPreview()},(function(){if(n.networkPreview){if(!w)return;w.removeAllListeners("serve-folder-done"),w.removeAllListeners("local-network-ips"),w.on("serve-folder-done",(function(t,r,n){r?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:r}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:n.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),w.on("local-network-ip",(function(t,r){e.setState({networkPreviewHost:r})})),w.send("serve-folder",{root:r}),w.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(f.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=v()(new P.AbstractFileSystemJS,s.a);return{outputDir:O.join(r.getTempDir(),"preview"),exporter:new P.Exporter(r,t),gdjsRoot:t}}))},e.launchPreview=function(t){var r=t.project,n=t.layout,o=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(i){var a=i.outputDir,c=i.exporter,u=i.gdjsRoot;Object(d.a)((function(){var i=new P.PreviewExportOptions(r,a);i.setLayoutName(n.getName()),o&&i.setExternalLayoutName(o.getName());var s=Object(g.a)();s&&i.useWebsocketDebuggerClientWithServerAddress(s.address,""+s.port);var l=e.props.getIncludeFileHashs();for(var p in l){var d=l[p];i.setIncludeFileHash(p,d)}i.setElectronRemoteRequirePath(O.join(u,"../preview_node_modules","@electron/remote","renderer/index.js"));var f=e.getPreviewDebuggerServer().getExistingDebuggerIds(),h=t.hotReload&&!!f.length;i.setProjectDataOnlyExport(h&&t.projectDataOnlyExport),i.setFullLoadingScreen(t.fullLoadingScreen),c.exportProjectForPixiPreview(i),i.delete(),c.delete(),h?(f.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(r,a,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkHasSubscription()},e}return Object(o.a)(r,[{key:"getPreviewDebuggerServer",value:function(){return g.b}},{key:"render",value:function(){var e=this,t=this.state,r=t.networkPreviewDialogOpen,n=t.networkPreviewHost,o=t.networkPreviewPort,i=t.networkPreviewError;return Object(j.jsxs)(u.Fragment,{children:[Object(j.jsx)(b.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:Object(j.jsx)(c.Trans,{id:"Preview over wifi"}),mode:"try"}),Object(j.jsx)(b.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},onChangeSubscription:function(){e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Hot reloading",title:Object(j.jsx)(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),Object(j.jsx)(h.a,{open:r,url:n&&o?"".concat(n,":").concat(o):null,error:i,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow})]})}}]),r}(u.Component)}).call(this,r(28))},1866:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(9),o=r(8),i=r(13),a=r(14),c=r(12),u=r(1),s=r(100),l=r(136),p=r(469),d=r(463),f=r(30),h=r(480),m=r(7),v=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){var e=this.props,t=e.url,r=e.open,n=e.error,o=e.onExport,i=e.onClose,a=e.onRunPreviewLocally;return r?Object(m.jsxs)(s.b,{actions:[Object(m.jsx)(l.a,{label:Object(m.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:i},"close")],secondaryActions:[o&&Object(m.jsx)(l.a,{label:Object(m.jsx)(c.Trans,{id:"Export game"}),onClick:o},"export"),Object(m.jsx)(l.a,{label:Object(m.jsx)(c.Trans,{id:"Run on this computer"}),onClick:a},"run-preview-locally")],open:r,onRequestClose:i,children:[n&&Object(m.jsx)(f.c,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."})})}),!n&&!t&&Object(m.jsx)(h.a,{}),!n&&t&&Object(m.jsxs)("div",{children:[Object(m.jsx)(f.c,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"})})}),Object(m.jsx)(p.b,{value:t,fullWidth:!0}),Object(m.jsx)(f.c,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."})})})]})]}):null}}]),r}(u.Component)},1875:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p}));var n=r(20),o=r.n(n)()("electron"),i=o?o.ipcRenderer:null,a="stopped",c=null,u=[],s=[],l={startServer:function(){if(!i)return Promise.reject();if("started"===a)return Promise.resolve();var e=new Promise((function(e,t){var r=!1;a="stopped",c=null,i&&(i.removeAllListeners("debugger-send-message-done"),i.removeAllListeners("debugger-error-received"),i.removeAllListeners("debugger-connection-closed"),i.removeAllListeners("debugger-connection-opened"),i.removeAllListeners("debugger-start-server-done"),i.removeAllListeners("debugger-message-received")),i.on("debugger-error-received",(function(e,n){r||(t(n),r=!0),u.forEach((function(e){return(0,e.onErrorReceived)(n)}))})),i.on("debugger-connection-closed",(function(e,t){var r=t.id,n=s.indexOf(r);-1!==n&&s.splice(n,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:r,debuggerIds:s})}))})),i.on("debugger-connection-opened",(function(e,t){var r=t.id;s.push(r),u.forEach((function(e){return(0,e.onConnectionOpened)({id:r,debuggerIds:s})}))})),i.on("debugger-start-server-done",(function(t,n){var o=n.address;console.info("Local preview debugger started"),a="started",c=o,r||(e(),r=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),i.on("debugger-message-received",(function(e,t){var r=t.id,n=t.message;console.info("Processing message received for debugger");try{var o=JSON.parse(n);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:r,parsedMessage:o})}))}catch(i){console.warn("Error while parsing message received from debugger client:",i)}})),i.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){i&&("stopped"!==a?i.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return a},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var t=u.indexOf(e);-1!==t&&u.splice(t,1)}}},p=function(){return c}},1876:function(e,t,r){"use strict";r.d(t,"c",(function(){return g})),r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return x}));var n=r(4),o=r(1877),i=r(1878),a=r(1879),c=r(1880),u=r(1882),s=r(1883),l=r(1884),p=r(730),d=r(741),f=r(740),h=r(733),m=r(734),v=r(735),b=r(731),g=Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:l.a}),j=[Object(n.a)(Object(n.a)({},f.c),{},{exportPipeline:a.a}),Object(n.a)(Object(n.a)({},m.b),{},{exportPipeline:u.a}),Object(n.a)(Object(n.a)({},v.b),{},{exportPipeline:s.a}),Object(n.a)(Object(n.a)({},h.c),{},{exportPipeline:c.a})],x=[Object(n.a)(Object(n.a)({},f.c),{},{exportPipeline:a.a}),Object(n.a)(Object(n.a)({},p.c),{},{exportPipeline:o.a}),Object(n.a)(Object(n.a)({},b.c),{},{exportPipeline:i.a})]},1877:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n=r(12),o=(r(1),r(137)),i=r(30),a=r(531),c=r(548),u=r(729),s=r(498),l=r.n(s),p=r(20),d=r.n(p),f=r(730),h=r(7),m=d()("electron"),v=m?m.shell:null,b=e.gd,g={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(h.jsxs)(i.a,{noMargin:!0,children:[Object(h.jsx)(i.c,{children:Object(h.jsx)(i.a,{noMargin:!0,children:Object(h.jsx)(f.b,{})})}),Object(h.jsx)(i.c,{children:Object(h.jsx)(u.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(h.jsx)(n.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=l()(new b.AbstractFileSystemJS,c.a);return{exporter:new b.Exporter(r,t)}}))},launchExport:function(e,t){var r=t.exporter,n=new b.MapStringBoolean;return n.set("exportForCordova",!0),r.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),r.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){v&&v.openPath(t.outputDir)});return Object(h.jsx)(f.a,{renderGameButton:function(){return Object(h.jsx)(o.a,{label:Object(h.jsx)(n.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(28))},1878:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n=r(12),o=(r(1),r(137)),i=r(30),a=r(531),c=r(548),u=r(729),s=r(498),l=r.n(s),p=r(20),d=r.n(p),f=r(731),h=r(7),m=d()("electron"),v=m?m.shell:null,b=e.gd,g={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(h.jsxs)(i.a,{noMargin:!0,children:[Object(h.jsx)(i.c,{children:Object(h.jsx)(i.a,{noMargin:!0,children:Object(h.jsx)(f.b,{})})}),Object(h.jsx)(i.c,{children:Object(h.jsx)(u.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(h.jsx)(n.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=l()(new b.AbstractFileSystemJS,c.a);return{exporter:new b.Exporter(r,t)}}))},launchExport:function(e,t){var r=t.exporter,n=new b.MapStringBoolean;return n.set("exportForElectron",!0),r.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),r.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){v&&v.openPath(t.outputDir)});return Object(h.jsx)(f.a,{renderGameButton:function(){return Object(h.jsx)(o.a,{label:Object(h.jsx)(n.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(28))},1879:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n=r(12),o=(r(1),r(137)),i=r(30),a=r(531),c=r(548),u=r(729),s=r(498),l=r.n(s),p=r(20),d=r.n(p),f=r(740),h=r(7),m=d()("electron"),v=m?m.shell:null,b=e.gd,g={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(h.jsxs)(i.a,{noMargin:!0,children:[Object(h.jsx)(i.c,{children:Object(h.jsx)(f.b,{})}),Object(h.jsx)(i.c,{children:Object(h.jsx)(u.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(h.jsx)(n.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(a.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=l()(new b.AbstractFileSystemJS,c.a);return{exporter:new b.Exporter(r,t)}}))},launchExport:function(e,t){var r=t.exporter,n=new b.MapStringBoolean;return r.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),r.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return Object(h.jsx)(f.a,{renderGameButton:function(){return Object(h.jsx)(o.a,{fullWidth:!0,primary:!0,onClick:function(){v&&v.openPath(t.outputDir)},label:Object(h.jsx)(n.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,r(28))},1880:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return w}));var n=r(12),o=(r(1),r(137)),i=r(30),a=r(531),c=r(548),u=r(498),s=r.n(u),l=r(20),p=r.n(l),d=r(1881),f=r(732),h=r(733),m=r(7),v=p()("path"),b=p()("electron"),g=p()("@electron/remote"),j=g?g.app:null,x=b?b.shell:null,O=e.gd,w={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:j?v.join(j.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},isNavigationDisabled:function(){return!1},renderHeader:function(e){e.project;var t=e.exportState,r=e.updateExportState;return Object(m.jsxs)(i.a,{noMargin:!0,children:[Object(m.jsx)(i.c,{children:Object(m.jsx)(h.b,{})}),Object(m.jsx)(i.c,{children:Object(m.jsx)(d.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:j?j.getPath("documents"):"",onChange:function(e){return r((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(m.jsx)(n.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=s()(new O.AbstractFileSystemJS,c.a),n=new O.Exporter(r,t),o=v.join(r.getTempDir(),"FacebookInstantGamesExport");return r.mkDir(o),r.clearDir(o),{exporter:n,temporaryOutputDir:o}}))},launchExport:function(e,t){var r=t.exporter,n=t.temporaryOutputDir,o=new O.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),r.exportWholePixiProject(e.project,n,o),o.delete(),r.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:function(e,t){var r=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:r})},launchCompression:function(e,t){var r=t.temporaryOutputDir;return Object(f.a)({path:r,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){x&&v&&x.openPath(v.dirname(t.archiveOutputFilename))});return Object(m.jsx)(h.a,{renderGameButton:function(){return Object(m.jsx)(o.a,{label:Object(m.jsx)(n.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(28))},1881:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(4),o=r(9),i=r(8),a=r(13),c=r(14),u=r(12),s=r(1),l=r(469),p=r(20),d=r.n(p),f=r(137),h=r(7),m=d()("electron"),v=d()("@electron/remote"),b=v?v.dialog:null,g={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},j=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onChooseFolder=function(){if(b&&m){var t=v.getCurrentWindow();return b.showSaveDialog(t,{title:e.props.title,filters:e.props.filters,message:e.props.message,defaultPath:e.props.defaultPath}).then((function(t){var r=t.filePath;e.props.onChange(r||"")}))}},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{style:Object(n.a)(Object(n.a)({},g.container),{},{width:this.props.fullWidth?"100%":void 0}),children:[Object(h.jsx)(l.b,{margin:"dense",style:g.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,r){return e.props.onChange(r)}}),Object(h.jsx)(f.a,{label:Object(h.jsx)(u.Trans,{id:"Choose"}),style:g.button,onClick:this.onChooseFolder})]})}}]),r}(s.PureComponent)},1882:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return j}));var n=r(4),o=r(12),i=(r(1),r(498)),a=r.n(i),c=r(519),u=r(868),s=r(531),l=r(732),p=r(20),d=r.n(p),f=r(548),h=r(734),m=r(7),v=d()("path"),b=d()("os"),g=e.gd,j={name:"local-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,r){return t||""===r},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(m.jsx)(h.a,Object(n.a)({},e))},renderLaunchButtonLabel:function(){return Object(m.jsx)(o.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=a()(new g.AbstractFileSystemJS,f.a),n=new g.Exporter(r,t),o=v.join(r.getTempDir(),"OnlineCordovaExport");return r.mkDir(o),r.clearDir(o),{exporter:n,temporaryOutputDir:o}}))},launchExport:function(e,t){var r=t.exporter,n=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForCordova",!0),r.exportWholePixiProject(e.project,n,o),o.delete(),r.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:function(e,t){var r=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:r})},launchCompression:function(e,t){var r=t.temporaryOutputDir,n=b.tmpdir();return Object(l.a)({path:r,outputFilename:v.join(n,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(r){return Object(u.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.a)(o,i.uid,r,e.targets,e.keystore,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(28))},1883:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return j}));var n=r(4),o=r(12),i=(r(1),r(498)),a=r.n(i),c=r(519),u=r(531),s=r(868),l=r(732),p=r(20),d=r.n(p),f=r(548),h=r(735),m=r(7),v=d()("path"),b=d()("os"),g=e.gd,j={name:"local-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,r){return!!e.targets.length&&(t||""===r)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(m.jsx)(h.a,Object(n.a)({},e))},renderLaunchButtonLabel:function(){return Object(m.jsx)(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=a()(new g.AbstractFileSystemJS,f.a),n=new g.Exporter(r,t),o=v.join(r.getTempDir(),"OnlineElectronExport");return r.mkDir(o),r.clearDir(o),{exporter:n,temporaryOutputDir:o}}))},launchExport:function(e,t){var r=t.exporter,n=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForElectron",!0),r.exportWholePixiProject(e.project,n,o),o.delete(),r.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:function(e,t){var r=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:r})},launchCompression:function(e,t){var r=t.temporaryOutputDir,n=b.tmpdir();return Object(l.a)({path:r,outputFilename:v.join(n,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(r){return Object(s.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.b)(o,i.uid,r,e.targets,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(28))},1884:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n=r(12),o=(r(1),r(498)),i=r.n(o),a=r(519),c=r(868),u=r(531),s=r(732),l=r(20),p=r.n(l),d=r(548),f=r(741),h=r(7),m=p()("path"),v=p()("os"),b=e.gd,g={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,r){return t||""===r||"done"===r},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(h.jsx)(f.a,{})},renderLaunchButtonLabel:function(){return Object(h.jsx)(n.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,r=e.project,n=e.onSaveProject,o=e.errored,i=e.exportStep;return Object(h.jsx)(f.b,{build:t,project:r,onSaveProject:n,errored:o,exportStep:i})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=i()(new b.AbstractFileSystemJS,d.a),n=new b.Exporter(r,t),o=m.join(r.getTempDir(),"OnlineWebExport");return r.mkDir(o),r.clearDir(o),{exporter:n,temporaryOutputDir:o}}))},launchExport:function(e,t){var r=t.exporter,n=t.temporaryOutputDir,o=new b.MapStringBoolean;return r.exportWholePixiProject(e.project,n,o),o.delete(),r.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:function(e,t){var r=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:r})},launchCompression:function(e,t){var r=t.temporaryOutputDir,n=v.tmpdir();return Object(s.a)({path:r,outputFilename:m.join(n,"game-archive.zip"),sizeLimit:25e7})},launchUpload:function(e,t){return Object(a.f)().then((function(r){return Object(c.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(a.c)(o,i.uid,r,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(28))},1886:function(e,t,r){"use strict";var n=r(1),o=r(20),i=r.n(o),a=r(545),c=r(556),u=r(88),s=i()("electron"),l=s?s.ipcRenderer:null,p=function(e,t){n.useEffect((function(){if(l){var r=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.apply(void 0,n)};return l.on(e,r),function(){return l.removeListener(e,r)}}}),[e,t])};t.a=function(e){var t=e.i18n,r=e.project,o=e.recentProjectFiles,i=e.onOpenRecentFile,s=Object(c.e)(),d=t.language;return p("main-menu-open",e.onChooseProject),p("main-menu-open-recent",e.onOpenRecentFile),p("main-menu-save",e.onSaveProject),p("main-menu-save-as",e.onSaveProjectAs),p("main-menu-close",e.onCloseProject),p("main-menu-close-app",e.onCloseApp),p("main-menu-export",e.onExportProject),p("main-menu-create",e.onCreateProject),p("main-menu-open-project-manager",e.onOpenProjectManager),p("main-menu-open-home-page",e.onOpenHomePage),p("main-menu-open-debugger",e.onOpenDebugger),p("main-menu-open-about",e.onOpenAbout),p("main-menu-open-preferences",e.onOpenPreferences),p("main-menu-open-language",e.onOpenLanguage),p("main-menu-open-profile",e.onOpenProfile),p("main-menu-open-games-dashboard",e.onOpenGamesDashboard),p("update-status",e.setUpdateStatus),n.useEffect((function(){!function(e,t,r,n){var o={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:Object(c.a)(n.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:Object(c.a)(n.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:t._({id:"Open Recent"}),submenu:r.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:t._({id:"Save"}),accelerator:Object(c.a)(n.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:Object(c.a)(n.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:Object(c.a)(n.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:Object(c.a)(n.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(u.e)()||o.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:Object(c.a)(n.QUIT_APP),onClickSendEvent:"main-menu-close-app"});var i={label:t._({id:"Edit"}),submenu:[{label:t._({id:"Undo"}),role:"undo"},{label:t._({id:"Redo"}),role:"redo"},{type:"separator"},{label:t._({id:"Cut"}),role:"cut"},{label:t._({id:"Copy"}),role:"copy"},{label:t._({id:"Paste"}),role:"paste"},{label:t._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:t._({id:"Delete"}),role:"delete"},{label:t._({id:"Select All"}),role:"selectall"}]},a={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:Object(c.a)(n.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Home"}),onClickSendEvent:"main-menu-open-home-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{label:t._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:t._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]},s={label:t._({id:"Window"}),role:"window",submenu:[{label:t._({id:"Minimize"}),role:"minimize"}]},p={label:t._({id:"Help"}),role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop.io"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop.io"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop.io/page/contribute"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(u.e)()||p.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var d=[o,i,a,s,p];Object(u.e)()&&(d.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),i.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),s.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),l&&l.send("set-main-menu",d)}(r,t,o,s)}),[t,d,r,o,s]),Object(a.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:n.useCallback((function(){return o.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return i(e)}}}))}),[i,o])}),null}},1887:function(e,t,r){var n=r(1132).loadExtension,o=r(20),i=r(1888).findJsExtensionModules;e.exports=function(e){var t=e.gd,r=e.objectsEditorService,a=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return i({filterExamples:c,onFindGDJS:u}).then((function(i){return Promise.all(i.map((function(i){var c=null;try{c=o(i,{rethrowException:!0})}catch(u){return{extensionModulePath:i,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(r&&c.registerEditorConfigurations&&c.registerEditorConfigurations(r),a&&c.registerInstanceRenderers&&c.registerInstanceRenderers(a),{extensionModulePath:i,result:n(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:i,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},1888:function(e,t,r){var n=r(531).findGDJS,o=r(20),i=o("path"),a=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples,r=e.onFindGDJS;return(r?r():n()).then((function(e){var r=e.gdjsRoot,n=i.join(r,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(n,"...")),new Promise((function(e,r){a.readdir(n,(function(o,c){if(o)return r(o);var u=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return t=i.join(n,e),new Promise((function(e){var r=i.join(t,"JsExtension.js");a.stat(r,(function(t,n){return e(t?null:n.isFile()?r:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),r)}))}))}))}}},1889:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(20),o=r.n(n),i=r(1131),a=r(704),c=r.n(a),u=o()("path"),s=o()("os"),l=o()("fs"),p=function(e){var t=e.onWriteFile,r=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(i.a)());l.mkdir(r,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var n=function(e){return"".concat(r,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return n(e)},writeFunctionCode:function(e,r){return new Promise((function(o,i){var a=n(e);t({includeFile:a,content:r}),l.writeFile(a,r,(function(e){if(e)return i(e);o()}))}))},writeBehaviorCode:function(e,r){return new Promise((function(o,i){var a=n(e);t({includeFile:a,content:r}),l.writeFile(a,r,(function(e){if(e)return i(e);o()}))}))}}}},1901:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(8),o=r(9),i=r(492),a=r(20),c=r.n(a),u=c()("fs-extra"),s=c()("path"),l=c()("@electron/remote"),p=l?l.dialog:null,d=Object(n.a)((function e(){Object(o.a)(this,e)}));d.chooseEventsFunctionExtensionFile=function(e){if(!p)return Promise.reject("Not supported");var t=l.getCurrentWindow();return p.showSaveDialog(t,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:e||"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},d.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!u)return Promise.reject(new Error("Filesystem is not supported."));try{var r=JSON.stringify(e,null,2);return u.ensureDir(s.dirname(t)).then((function(){return new Promise((function(e,n){u.writeFile(t,r,(function(t){return t?n(t):e()}))}))}))}catch(n){return Promise.reject(n)}}(Object(i.b)(e),t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))}},1902:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(8),o=r(9),i=r(20),a=r.n(i),c=a()("fs"),u=a()("@electron/remote"),s=u?u.dialog:null,l=Object(n.a)((function e(){Object(o.a)(this,e)}));l.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=u.getCurrentWindow();return s.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},l.readEventsFunctionExtensionFile=function(e){return function(e){return c?new Promise((function(t,r){c.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return r(n);try{var i=JSON.parse(o);return t(i)}catch(a){return r(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},1903:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(1),o=r(20),i=r.n(o),a=r(43),c=i()("electron"),u=c?c.ipcRenderer:null,s=function(){var e=n.useContext(a.a).values.useGDJSDevelopmentWatcher;return n.useEffect((function(){if(e){if(u)return u.send("setup-local-gdjs-development-watcher"),function(){u.send("close-local-gdjs-development-watcher")};console.error("Unable to find ipcRenderer to set up GDJS development watchers")}}),[e]),null}},1918:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return j}));var n=r(3),o=r(0),i=r.n(o),a=r(63),c=r.n(a),u=r(1158),s=r(20),l=r.n(s),p=r(610),d=r(81),f=r(62),h=r(1137),m=e.gd,v=l()("path"),b=l()("fs-extra"),g=function(){var e=Object(n.a)(i.a.mark((function e(t){var r,n,o,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.i18n,n=t.settings,o=n.projectName,a=n.outputPath,b&&a){e.next=4;break}return e.abrupt("return");case 4:e.prev=4,b.mkdirsSync(a),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),Object(f.a)({message:r._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:a}}),rawError:e.t0,errorId:"local-example-creation-error"}),e.abrupt("return");case 12:return c=m.ProjectHelper.createNewGDJSProject(),s=v.join(a,"game.json"),c.setProjectFile(s),Object(d.q)({exampleUrl:"",exampleSlug:""}),e.abrupt("return",{project:c,storageProvider:u.a,fileMetadata:{fileIdentifier:s},projectName:o});case 17:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(i.a.mark((function e(t){var r,n,o,a,s,l,m,g,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.i18n,n=t.exampleShortHeader,o=t.settings,a=o.projectName,s=o.outputPath,b&&s){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(p.a)(n);case 7:return l=e.sent,b.mkdirsSync(s),e.next=11,c.a.get(l.projectFileUrl,{responseType:"text",transformResponse:[function(e){return e}]});case 11:return m=e.sent,g=m.data,j=v.join(s,"game.json"),e.next=16,Object(h.d)(g,j);case 16:return Object(d.q)({exampleUrl:l.projectFileUrl,exampleSlug:n.slug}),e.abrupt("return",{storageProvider:u.a,fileMetadata:{fileIdentifier:j},projectName:a});case 20:return e.prev=20,e.t0=e.catch(4),Object(f.a)({message:r._({id:"Unable to load the example or save it on disk."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"}),e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,r(28))},2102:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(3),o=r(0),i=r.n(o),a=r(20),c=r.n(a),u=r(486),s=r(1904),l=r.n(s),p=function(){var e=Object(n.a)(i.a.mark((function e(t,r){var n,o,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.times,o=0,a=null;case 3:if(!(o<n)){e.next=18;break}return o++,a=null,e.prev=6,e.next=9,r();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(6),a=e.t0;case 16:e.next=3;break;case 18:throw a;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,r){return e.apply(this,arguments)}}(),d=c()("electron"),f=d?d.ipcRenderer:null,h=c()("fs-extra"),m=c()("path"),v=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().filter((function(e){var r,n=t.getResource(e);return(r=n.getFile()).startsWith("http://")||r.startsWith("https://")||r.startsWith("ftp://")}))},b=function(){var e=Object(n.a)(i.a.mark((function e(t){var r,o,a,c,s,d,b,g,j,x,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.project,o=t.resourceNames,a=t.onProgress,h&&f){e.next=3;break}throw new Error("Unsupported");case 3:return c=r.getResourcesManager(),s=m.dirname(r.getProjectFile()),d=m.join(s,"assets"),b=new Set,g=[],j=[],x=0,O=v(r),e.abrupt("return",l.a.withConcurrency(50).for(o).process(function(){var e=Object(n.a)(i.a.mark((function e(t){var r,o,l,v,w,P;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.getResource(t),o=r.getFile(),l=m.extname(o),v=m.basename(o,l),w=Object(u.a)(v,(function(e){var t=m.join(d,e)+l;return h.existsSync(t)||b.has(t)})),P=m.join(d,w)+l,b.add(P),e.prev=7,e.next=10,p({times:2},Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.ensureDir(d);case 2:return e.next=4,f.invoke("local-file-download",o,P);case 4:r.setFile(m.relative(s,P).replace(/\\/g,"/")),j.push({resourceName:t});case 6:case"end":return e.stop()}}),e)}))));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),g.push({resourceName:t,error:e.t0});case 15:a(x++,O.length);case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return{fetchedResources:j,erroredResources:g}})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getResourcesToFetch:v,fetchResources:b}},440:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"create",(function(){return D}));var n=r(4),o=(r(1),r(888)),i=r(35),a=r(1150),c=r(1151),u=(r(104),r(219),r(1860)),s=r(1861),l=r(1865),p=r(1876),d=r(1886),f=r(1887),h=r.n(f),m=r(1889),v=r(724),b=r(530),g=r(1147),j=r(1901),x=r(1902),O=r(1135),w=r(1158),P=r(1903),S=r(2102),y=r(1918),E=r(7),k=e.gd,D=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),r=i.b.isDev();return Object(E.jsx)(g.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:m.a,eventsFunctionsExtensionWriter:j.a,eventsFunctionsExtensionOpener:x.a,resourceFetcher:S.a,children:function(e){var i=e.i18n;return Object(E.jsx)(O.a,{appArguments:t,storageProviders:[w.a],defaultStorageProvider:w.a,children:function(e){var t=e.getStorageProviderOperations,f=e.storageProviders,m=e.initialFileMetadataToOpen,g=e.getStorageProvider;return Object(E.jsx)(o.a,{i18n:i,renderMainMenu:function(e){return Object(E.jsx)(d.a,Object(n.a)({},e))},renderPreviewLauncher:function(e,t){return Object(E.jsx)(l.a,Object(n.a)(Object(n.a)({},e),{},{ref:t}))},renderExportDialog:function(e){return Object(E.jsx)(a.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:p.a,manualExporters:p.b,onlineWebExporter:p.c})},renderCreateDialog:function(e){return Object(E.jsx)(c.a,{open:e.open,onClose:e.onClose,onOpen:e.onOpen,initialTab:e.initialTab,onCreateBlank:y.a,onCreateFromExampleShortHeader:y.b})},renderGDJSDevelopmentWatcher:r?function(){return Object(E.jsx)(P.a,{})}:null,onCreateFromExampleShortHeader:y.b,onCreateBlank:y.a,storageProviders:f,getStorageProviderOperations:t,getStorageProvider:g,resourceSources:u.a,resourceExternalEditors:s.a,extensionsLoader:h()({gd:k,objectsEditorService:v.a,objectsRenderingService:b.a,filterExamples:!r}),initialFileMetadataToOpen:m})}})}})}}.call(this,r(28))},548:function(e,t,r){"use strict";(function(e){var n=r(20),o=r.n(n),i=r(1131),a=o()("fs-extra"),c=o()("path"),u=o()("os"),s=e.gd,l={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){try{a.emptyDirSync(e)}catch(t){console.error("clearDir("+e+") failed: "+t)}},getTempDir:function(){return c.join(u.tmpdir(),"GDTMP-".concat(Object(i.a)()))},fileNameFrom:function(e){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.basename(e))},dirNameFrom:function(e){return this._isExternalUrl(e)?"":(e=this._translateUrl(e),c.dirname(e).replace(/\\/g,"/"))},makeAbsolute:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),this.isAbsolute(t)||(t=c.resolve(t)),c.resolve(t,c.normalize(e)).replace(/\\/g,"/"))},makeRelative:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.relative(t,c.normalize(e)).replace(/\\/g,"/"))},isAbsolute:function(e){return!!this._isExternalUrl(e)||(0===e.length||((e=this._translateUrl(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalUrl(e))return!0;e=this._translateUrl(e);try{e!==t&&a.copySync(e,t)}catch(r){return console.error("copyFile("+e+", "+t+") failed: "+r),!1}return!0},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(r){return console.error("writeToFile("+e+", ...) failed: "+r),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var r=new s.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach((function(n){0!==t.length&&-1===n.toUpperCase().indexOf(t,n.length-t.length)||r.push_back(e+"/"+n)}))}catch(n){console.error("readDir("+e+","+t+") failed: "+n)}return r},fileExists:function(e){e=this._translateUrl(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},_translateUrl:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}};t.a=l}).call(this,r(28))},732:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(20),o=r.n(n),i=r(810),a=o()("fs"),c=Object(i.a)("archiver"),u=function(e){var t=e.path,r=e.outputFilename,n=e.sizeLimit,o=c();return new Promise((function(e,i){if(!a||!o)return i(new Error("Archiver unavailable"));var c=a.createWriteStream(r),u=o("zip",{zlib:{level:9}});c.on("close",(function(){var t=u.pointer();if(console.log("Archive written at ".concat(r,", ").concat(t,"} total bytes.")),n&&t>n){var o=Math.round(t/1e6);i(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(n/1e6," MB.")))}e(r)})),u.on("error",(function(e){i(e)})),u.pipe(c),u.directory(t,!1),u.finalize()}))}},868:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(20),o=r.n(n)()("electron"),i=o?o.ipcRenderer:null,a=function(e,t,r){return i?(i.removeAllListeners("local-file-upload-progress"),i.removeAllListeners("local-file-upload-done"),new Promise((function(n,o){i.on("local-file-upload-progress",(function(e,t,n){r(t,n)})),i.on("local-file-upload-done",(function(e,t){if(t)return o(t);n()})),i.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}}}]);
//# sourceMappingURL=local-app.0a22c4c7.chunk.js.map